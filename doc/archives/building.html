<!doctype html>
<html lang="en">
	<!-- This is the layout used for all pages in the wiki-style documentation.
        The wiki files must have "layout: doc" in their front matter.
        This file can use page.NAME to refer to variables declared in the front matter
        and content to refer to the body of the md file.
   -->

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <!--
      Do not use base tag: <base href="/uniformal.github.io/" />
      Since otherwise we could not keep links in the documentation relative anymore - without a hassle at least.
      We would always have to prepend doc/ or something.

      Hence, use e.g. `/uniformal.github.io/lib/css/bootstrap.min.css` to refer to assets in this file only.
    -->
    <link rel="icon" href="https://comfreek.github.io/uniformal.github.io/favicon.ico">

    <title>MMT - Building Documents</title>

    <link href="https://comfreek.github.io/uniformal.github.io/lib/css/bootstrap.min.css" rel="stylesheet" />
	  <link href="https://comfreek.github.io/uniformal.github.io/lib/css/doc.css" rel="stylesheet" />
		<link href="https://comfreek.github.io/uniformal.github.io/lib/css/pygments-default.css" rel="stylesheet" />
	
  </head>
  <body>
	
<nav class="navbar navbar-expand navbar-dark site-header" site-header >
    <div class="container">
        <a class="navbar-brand" href="/">
            <img src="https://comfreek.github.io/uniformal.github.io/lib/css/img/logo_dark.svg" width="30" height="30" class="d-inline-block align-top" alt="">
            The MMT Language and System
        </a>
    </div>
</nav>

	
		<div class="container-fluid main">
			<div class="row">
				<div class="col-12 col-md-3 col-xl-2">
					<ul class="nav flex-column">
						


<div class="list-group">
  
    


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/"
    
>
    Overview
</a>

  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/setup/">
    Setting up MMT
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/tutorials/">
    Tutorials
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/philosophy/">
    The Philosophy behind MMT
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/language/">
    The MMT Language
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable active" href="https://comfreek.github.io/uniformal.github.io/doc/archives/">
    MMT-Archives
</a>




    <div class="list-group">
        
            


    



<a class="list-group-item list-group-item-action active"
    
        href="https://comfreek.github.io/uniformal.github.io/doc/archives/building.html"
    
>
    The Build System
</a>

        
            


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/archives/oaf.html"
    
>
    The OAF Project
</a>

        
            


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/archives/Mathhub">
    Installing and Publishing Archives using MathHub
</a>





        
    </div>


  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/api/">
    The MMT API
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/applications/">
    Applications and Projects based on MMT
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/development/">
    Development
</a>





  
    


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/community/"
    
>
    Community & Communication
</a>

  
    


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/contribs"
    
>
    Contributed Articles
</a>

  
</div>
					</ul>
				</div>
				<div class="col-12 col-md-9 col-xl-8 content">
					<h2>Building Documents</h2>
					<hr />
	
					<p>MMT can be used as a build tool using a special <a href="shell.html">shell command</a>.</p>

<p><code class="highlighter-rouge">build ARCHIVE TARGET [P/A/T/H]</code> runs the build target <code class="highlighter-rouge">TARGET</code> on the <a href="archives.html">archive</a> with id <code class="highlighter-rouge">ARCHIVE</code>. Optionally, the operation can be restricted to the subfolder <code class="highlighter-rouge">P/A/T/H</code>.</p>

<h3 id="defining-build-targets">Defining Build Targets</h3>

<p>The collection of build targets is maintained by the <a href="../api/extensions/">extension manager</a>. New build targets are defined by implementing the <a href="apidoc://info.kwarc.mmt.api.archives.BuildTarget"><code class="highlighter-rouge">archives.BuildTarget</code></a> class.
Build target modfiers and change management are supported for automatically for every build target.</p>

<h3 id="build-target-modifiers">Build Target Modifiers</h3>

<ul>
  <li>The target <code class="highlighter-rouge">TARGET*</code> only operates on input files that have been modified since the last build.</li>
  <li>The target <code class="highlighter-rouge">-TARGET</code> cleans, i.e., deletes the generated files.</li>
</ul>

<p>The file-properties of the operating system are used to detect changes. Timestamps for the previous build are stored in <code class="highlighter-rouge">META-INF/timestamps</code>.</p>

<p>Any target may be followed by a modifier. Apart from <code class="highlighter-rouge">--force</code>, other supported modifiers are <code class="highlighter-rouge">--forceDeps</code> (which also forces building of dependencies), <code class="highlighter-rouge">--depsFirst</code>, <code class="highlighter-rouge">--onChange</code>, <code class="highlighter-rouge">--onError</code>, <code class="highlighter-rouge">--dry-run</code> and <code class="highlighter-rouge">--clean</code> (as well as <code class="highlighter-rouge">--test</code>,<code class="highlighter-rouge">--test-add</code> and <code class="highlighter-rouge">--test-update</code>). Omitting the modifier defaults to <code class="highlighter-rouge">--onChange</code>, i.e. files are only rebuild if they have changed on disk after an earlier build. (<code class="highlighter-rouge">--onError</code> rebuilds if the previous build failed with an error.)</p>

<h3 id="individual-build-targets">Individual Build Targets</h3>
<p>Many build targets work with input and/or output dimensions. Those are the top level folders within an archive.
The most important build targets (which are available by default) include:</p>
<table border="1">
<tr>
<th>Target</th><th>Input dimension</th><th>Output dimension</th><th>Provided by</th><th>Description</th>
</tr>
<tr>
    <td>index</td><td>source</td><td>content, narration, relational</td><td>api</td>
    <td>indexes and prepares OMDoc source files for MMT lookups, the produced dimensions are from where MMT retrieves content, documents, and the ontology, respectively</td>
</tr>
<tr>
    <td>mmt-omdoc</td><td>source</td><td>as index</td><td>api</td>
    <td>like index but parses and type-checks MMT source files instead of OMDoc files</td>
</tr>
<tr>
    <td>twelf-omdoc</td><td>source</td><td>as index</td><td>LF plugin</td>
    <td>like mmt-omdoc but for Twelf syntax</td>
</tr>
<tr>
    <td>html</td><td>narration</td><td>html</td><td>api</td>
    <td>produces html website, which relates to source roughly as JavaDoc does to Java</td>
</tr>
<tr>
    <td>svg</td><td>narration</td><td>svg</td><td>api</td>
    <td>produces theory graphs</td>
</tr>
<tr>
    <td>scala</td><td>content</td><td>scala</td><td>api</td>
    <td>produces Scala stubs for all MMT theories</td>
</tr>
<tr>
    <td>lf-scala</td><td>content</td><td>lf-scala</td><td>LF plugin</td>
    <td>produces LF-aware typed Scala stubs</td>
</tr>
<tr>
    <td>mar</td><td>multiple</td><td>none, produces file NAME.mar</td><td>api</td>
    <td>creates a math archive, a zipped collection of the archive</td>
</tr>
</table>

<h3 id="build-queue-interface">Build Queue Interface</h3>

<p>See <a href="buildqueue.html">Build Queue</a> for detailed information on multi-threaded building.</p>

<h3 id="error-viewer-interface">Error Viewer Interface</h3>

<p>See <a href="errorviewer.html">Error Viewer</a> for detailed information on seeing the results of building many files.</p>

				</div>
			</div>
		</div>
	


	<div class="container">
		<footer class="container">

    <hr />
    <p>
        MMT is developed and maintained mostly by <a href="http://kwarc.info/frabe/" target="_blank">Florian Rabe</a>. <br />
        
        This page is hosted via github pages and can be edited <a href="https://github.com/UniFormal/uniformal.github.io/edit/master/doc/archives/building.md" target="_blank">directly in the browser</a>. <br/>
    </p>
</footer>
	</div>

    <script src="https://comfreek.github.io/uniformal.github.io/lib/js/jquery-3.3.1.min.js"></script>
    <script src="https://comfreek.github.io/uniformal.github.io/lib/js/bootstrap.min.js"></script>
		<script src="https://comfreek.github.io/uniformal.github.io/lib/js/doc.js"></script>
		<script src="https://comfreek.github.io/uniformal.github.io/lib/js/api.js"></script>
	
  </body>
</html>
