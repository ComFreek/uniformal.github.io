<!doctype html>
<html lang="en">
	<!-- This is the layout used for all pages in the wiki-style documentation.
        The wiki files must have "layout: doc" in their front matter.
        This file can use page.NAME to refer to variables declared in the front matter
        and content to refer to the body of the md file.
   -->

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <!--
      Do not use base tag: <base href="/uniformal.github.io/" />
      Since otherwise we could not keep links in the documentation relative anymore - without a hassle at least.
      We would always have to prepend doc/ or something.

      Hence, use e.g. `/uniformal.github.io/lib/css/bootstrap.min.css` to refer to assets in this file only.
    -->
    <link rel="icon" href="https://comfreek.github.io/uniformal.github.io/favicon.ico">

    <title>MMT - Overloading</title>

    <link href="https://comfreek.github.io/uniformal.github.io/lib/css/bootstrap.min.css" rel="stylesheet" />
	  <link href="https://comfreek.github.io/uniformal.github.io/lib/css/doc.css" rel="stylesheet" />
		<link href="https://comfreek.github.io/uniformal.github.io/lib/css/pygments-default.css" rel="stylesheet" />
	
  </head>
  <body>
	
<nav class="navbar navbar-expand navbar-dark site-header" site-header >
    <div class="container">
        <a class="navbar-brand" href="/">
            <img src="https://comfreek.github.io/uniformal.github.io/lib/css/img/logo_dark.svg" width="30" height="30" class="d-inline-block align-top" alt="">
            The MMT Language and System
        </a>
    </div>
</nav>

	
		<div class="container-fluid main">
			<div class="row">
				<div class="col-12 col-md-3 col-xl-2">
					<ul class="nav flex-column">
						


<div class="list-group">
  
    


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/"
    
>
    Overview
</a>

  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/setup/">
    Setting up MMT
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/tutorials/">
    Tutorials
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/philosophy/">
    The Philosophy behind MMT
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable active" href="https://comfreek.github.io/uniformal.github.io/doc/language/">
    The MMT Language
</a>




    <div class="list-group">
        
            


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/language/uris.html"
    
>
    MMT URIs
</a>

        
            


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/language/namespaces.html"
    
>
    Documents and Namespaces
</a>

        
            


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/language/modules.html"
    
>
    Modules
</a>

        
            


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/language/declarations.html"
    
>
    Symbol Declarations
</a>

        
            


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/language/objects.html"
    
>
    Terms
</a>

        
            


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/language/delimiters.html"
    
>
    Structural Delimiters
</a>

        
            


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/language/informal.html"
    
>
    Flexiformal Representations
</a>

        
            


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/language/literals.html"
    
>
    Generic Literals
</a>

        
            


    



<a class="list-group-item list-group-item-action active"
    
        href="https://comfreek.github.io/uniformal.github.io/doc/language/overloading.html"
    
>
    Overloading
</a>

        
    </div>


  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/archives/">
    MMT-Archives
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/api/">
    The MMT API
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/applications/">
    Applications and Projects based on MMT
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/development/">
    Development
</a>





  
    


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/community/"
    
>
    Community & Communication
</a>

  
    


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/contribs"
    
>
    Contributed Articles
</a>

  
</div>
					</ul>
				</div>
				<div class="col-12 col-md-9 col-xl-8 content">
					<h2>Overloading</h2>
					<hr />
	
					<p>We have to distinguish several kinds of overloading. Only some of them are supported by MMT.</p>

<h3 id="types-of-overloading">Types of Overloading</h3>

<p><strong>Semantic Overloading</strong></p>

<p>Here the same <a href="../api/uris.html">identifier</a> is used for unrelated constants.
These usually have different arities or types so that uses of the shared identifiers can be disambiguated.
This is very common in programming languages.</p>

<p>This is intentionally not supported by MMT.
Instead, MMT is designed such that every declaration has a unique identifier.</p>

<p>When representing languages with semantic overloading in MMT, qualified names such as <code class="highlighter-rouge">c/0</code>, <code class="highlighter-rouge">c/1</code>, â€¦ should be used for declarations sharing the overloaded name <code class="highlighter-rouge">c</code>.
In any case, it is still possible to use the same notation for all these declarations and use syntax overloading to emulate semantic overloading in user-facing formats.</p>

<p><strong>Syntax Overloading</strong></p>

<p>Here the same notation is used for unrelated identifiers.</p>

<p>The MMT parser/checker supports syntax overloading.
The parser generates all possible syntax trees, and the checker will choose one of them if the type of exactly one of them can be inferred uniquely.</p>

<p><strong>Subtyping Overloading</strong></p>

<p>Here a single semantic operation is formalized as multiple constants of the same name.
Contrary to semantic overloading, these constants are related: They have function types with overlapping domains and are implicitly specified to agree on the shared domain.</p>

<p>This is common in algebraic specification languages, e.g., CASL.
It is most commonly used for arithmetic functions on the various number domains: For example, addition may be declared for natural numbers and integers.</p>

<p><strong>Type Class Overloading</strong></p>

<p>A type class <code class="highlighter-rouge">C</code> is a set of operations on an abstract type. An instance of <code class="highlighter-rouge">C</code> is a concrete type with corresponding operations on it.
Typical examples are the algebraic structures.</p>

<p>Thus, a constant <code class="highlighter-rouge">f</code> declared in <code class="highlighter-rouge">C</code> is then available for each instance.
This can be seen as a special case of syntax overloading: Every instance of <code class="highlighter-rouge">C</code> creates a new copy of <code class="highlighter-rouge">f</code>, and all copies have different types but the same notation.</p>

<p>Alternatively, one can consider <code class="highlighter-rouge">f</code> as a single operation that takes the specific instance as an additional first argument. In that case, there is no overloading.
If the instance argument <code class="highlighter-rouge">a</code> is explicit, the notation <code class="highlighter-rouge">a.f(x)</code> can be used as in object-oriented programming languages.
If the instance argument is implicit, interpretation must disambiguate in a way that is similar to syntax overloading.</p>

<p>This is not supported yet by MMT.</p>

<h3 id="implementation-in-mmt">Implementation in MMT</h3>

<p>If multiple symbols use the same notation, the parser returns all possible parses.</p>

<ol>
  <li>Ambiguity handling is triggered if multiple constants use the same notation at the same precedence level.
 Currently, this also requires using the same pattern of implicit arguments. Future work may lift this restriction.</li>
  <li>The ambiguous parses are represented as the term <code class="highlighter-rouge">oneOf(k, a_1, ..., a_n)</code> where <code class="highlighter-rouge">k</code> is a natural number and the <code class="highlighter-rouge">a_i</code> are the possible alternatives.
 The meaning of this object is <code class="highlighter-rouge">a_k</code>.
 After parsing, k is a variable of unknown value.</li>
  <li>Ambiguity may be nested.
 This does not cause an exponential blowup in memory-use because all <code class="highlighter-rouge">a_i</code> share their subterms.
 This structure-sharing is obtained for free because Scala anyway uses pointers internally.</li>
  <li>Structure-sharing is expanded whenever an inductive algorithm constructs a new object.
 Therefore, MMT uses special implementations of simplification and substitution that preserve structure-sharing.
 (Incidentally, this speeds up the algorithms because previous results for the same term are reused.)</li>
</ol>

<p>When encountering an ambiguous term, the type-checker chooses the one that is well-typed.</p>

<ol>
  <li>The inference rule for <code class="highlighter-rouge">oneOf</code> tries to infer the type of each <code class="highlighter-rouge">a_i</code>.</li>
  <li>If all alternatives are ill-typed except for <code class="highlighter-rouge">a_K</code>, the checker solves <code class="highlighter-rouge">k:=K</code>.</li>
  <li>Once <code class="highlighter-rouge">k</code> is solved, the simplification rule for <code class="highlighter-rouge">oneOf</code> rewrites the whole term into <code class="highlighter-rouge">a_K</code>.</li>
</ol>

<p>Due to the presence of other unknown variables, type-checking is usually only semi-decidable.
Therefore, it can be very difficult to conclude that an alternative is definitively ill-typed.
In particular, it becomes important to have other typing rules that can return a definite No. (Typical rule implementations return either Yes or Maybe, and MMT implements negation as failure.)</p>

<p>This may require some global restrictions on the available rules. For example, a rule trying to prove <code class="highlighter-rouge">c=d</code> for definition-less constants <code class="highlighter-rouge">c</code> and <code class="highlighter-rouge">d</code> can only conclude <em>No</em> if it knows that no other rule can rewrite <code class="highlighter-rouge">c</code> into <code class="highlighter-rouge">d</code>.</p>

				</div>
			</div>
		</div>
	


	<div class="container">
		<footer class="container">

    <hr />
    <p>
        MMT is developed and maintained mostly by <a href="http://kwarc.info/frabe/" target="_blank">Florian Rabe</a>. <br />
        
        This page is hosted via github pages and can be edited <a href="https://github.com/UniFormal/uniformal.github.io/edit/master/doc/language/overloading.md" target="_blank">directly in the browser</a>. <br/>
    </p>
</footer>
	</div>

    <script src="https://comfreek.github.io/uniformal.github.io/lib/js/jquery-3.3.1.min.js"></script>
    <script src="https://comfreek.github.io/uniformal.github.io/lib/js/bootstrap.min.js"></script>
		<script src="https://comfreek.github.io/uniformal.github.io/lib/js/doc.js"></script>
		<script src="https://comfreek.github.io/uniformal.github.io/lib/js/api.js"></script>
	
  </body>
</html>
