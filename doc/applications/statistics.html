<!doctype html>
<html lang="en">
	<!-- This is the layout used for all pages in the wiki-style documentation.
        The wiki files must have "layout: doc" in their front matter.
        This file can use page.NAME to refer to variables declared in the front matter
        and content to refer to the body of the md file.
   -->

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <!--
      Do not use base tag: <base href="/uniformal.github.io/" />
      Since otherwise we could not keep links in the documentation relative anymore - without a hassle at least.
      We would always have to prepend doc/ or something.

      Hence, use e.g. `/uniformal.github.io/lib/css/bootstrap.min.css` to refer to assets in this file only.
    -->
    <link rel="icon" href="https://comfreek.github.io/uniformal.github.io/favicon.ico">

    <title>MMT - MMT Statistics Exporter</title>

    <link href="https://comfreek.github.io/uniformal.github.io/lib/css/bootstrap.min.css" rel="stylesheet" />
	  <link href="https://comfreek.github.io/uniformal.github.io/lib/css/doc.css" rel="stylesheet" />
		<link href="https://comfreek.github.io/uniformal.github.io/lib/css/pygments-default.css" rel="stylesheet" />
	
  </head>
  <body>
	
<nav class="navbar navbar-expand navbar-dark site-header" site-header >
    <div class="container">
        <a class="navbar-brand" href="/">
            <img src="https://comfreek.github.io/uniformal.github.io/lib/css/img/logo_dark.svg" width="30" height="30" class="d-inline-block align-top" alt="">
            The MMT Language and System
        </a>
    </div>
</nav>

	
		<div class="container-fluid main">
			<div class="row">
				<div class="col-12 col-md-3 col-xl-2">
					<ul class="nav flex-column">
						


<div class="list-group">
  
    


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/"
    
>
    Overview
</a>

  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/setup/">
    Setting up MMT
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/tutorials/">
    Tutorials
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/philosophy/">
    The Philosophy behind MMT
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/language/">
    The MMT Language
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/archives/">
    MMT-Archives
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/api/">
    The MMT API
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable active" href="https://comfreek.github.io/uniformal.github.io/doc/applications/">
    Applications and Projects based on MMT
</a>




    <div class="list-group">
        
            


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/applications/ides.html">
    IDEs
</a>





        
            


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/applications/shell.html"
    
>
    The MMT Shell
</a>

        
            


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/applications/server.html"
    
>
    The MMT Server
</a>

        
            


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/applications/tgview.html"
    
>
    TGView
</a>

        
            


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/applications/latex.html"
    
>
    LaTeX Processing
</a>

        
    </div>


  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/development/">
    Development
</a>





  
    


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/community/"
    
>
    Community & Communication
</a>

  
    


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/contribs"
    
>
    Contributed Articles
</a>

  
</div>
					</ul>
				</div>
				<div class="col-12 col-md-9 col-xl-8 content">
					<h2>MMT Statistics Exporter</h2>
					<hr />
	
					<p>This adds the build target ‘statistics’ to MMT producing statistical information about an archive, an mmt document or a theory. The statistics are generated from the relational data files in an archive and are written to JSON files in export/statistics, one file per MMT document. Each statistics file contains a list of tuples of a key and a list of key value pairs (formally a JSON array of JSON objects consisting of a JSONString and a JSON array of JSON objects), each pair consist of a key describing the <code class="highlighter-rouge">sorts of relations to the declaration</code> considered and a list of tuples, consisting of a key describing the <code class="highlighter-rouge">type of declarations</code> counted and the count itself. 
How exactly different declarations in the archive are counted is detailed below:</p>

<h3 id="types-of-declarations">Types of declarations</h3>

<p>The statistics distinguishes the following <code class="highlighter-rouge">types of declarations</code> (abbreviated by a short <code class="highlighter-rouge">key</code> in the JSON files):</p>
<ul>
  <li><code class="highlighter-rouge">document</code>, <code class="highlighter-rouge">theory</code> and <code class="highlighter-rouge">view</code> declared in the archive or document (transitive closure of the <code class="highlighter-rouge">declares</code> relation)</li>
  <li><code class="highlighter-rouge">explicit theory morphism</code> (transitive closure of views)</li>
  <li><code class="highlighter-rouge">any theory morphism</code>(transitive closure of any (explicit or implicit theory morphisms))</li>
  <li><code class="highlighter-rouge">constant</code> of different type declared (as above) in the archive or document:
    <ul>
      <li><code class="highlighter-rouge">structure</code> and <code class="highlighter-rouge">pattern</code></li>
      <li><code class="highlighter-rouge">untyped constant</code> (can’t be differentiated further) and <code class="highlighter-rouge">maltyped constant</code> (whoose type cannot be inferred succesfully)</li>
      <li>Term-level constants (which ultimately return a term)
        <ul>
          <li><code class="highlighter-rouge">data constructor</code></li>
          <li><code class="highlighter-rouge">rule</code></li>
        </ul>
      </li>
      <li>Type-level constants (which ultimately return a type)
        <ul>
          <li><code class="highlighter-rouge">datatype constructor</code></li>
          <li><code class="highlighter-rouge">judgment constructor</code></li>
        </ul>
      </li>
      <li>constants of a <code class="highlighter-rouge">high universe</code> (returning a kind, or classes even higher in the type hirachy)</li>
      <li>If not annotated otherwise (in the relational files) there are two fallbacks for declarations:
        <ul>
          <li><code class="highlighter-rouge">typed constant</code> for typed constants and <code class="highlighter-rouge">other</code> for non-constants</li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h3 id="sorts-of-relations-to-the-declarations">Sorts of relations to the declarations</h3>
<p>These types of declarations are counted for the following <code class="highlighter-rouge">sorts of relations to the declaration</code> of the given archive/document/theory as follows:</p>
<ul>
  <li><code class="highlighter-rouge">Declared declaration</code> (via possibly multiple intermediate declarations) of the given theory/document/archive</li>
  <li><code class="highlighter-rouge">Induced declaration by explicit morphisms (views)</code> (via possibly multiple intermediate views)</li>
  <li><code class="highlighter-rouge">Induced declaration by any morphisms</code> (via possibly multiple intermediate morphisms)</li>
  <li><code class="highlighter-rouge">Alignment</code> (possibly via multiple intermediate alignments) of declared (as above) declarations</li>
</ul>

<p>Since the statistics are based on the relational files, when an archive is updated, it needs to be rebuilt first, before the statistics can be updated.</p>

<h3 id="examples-of-one-exported-json-file">Examples of one exported JSON file</h3>
<p>The following example can be found in MMT/examples/export/statistics/narration/nat.json:</p>

<p>`[
  {
    “decl”: [
      {
        “any_mor”: 16
      },
      {
        “theo”: 4
      },
      {
        “type”: 2
      },
      {
        “ty_con”: 8
      },
      {
        “data”: 39
      }
    ]
  }
]</p>

				</div>
			</div>
		</div>
	


	<div class="container">
		<footer class="container">

    <hr />
    <p>
        MMT is developed and maintained mostly by <a href="http://kwarc.info/frabe/" target="_blank">Florian Rabe</a>. <br />
        
        This page is hosted via github pages and can be edited <a href="https://github.com/UniFormal/uniformal.github.io/edit/master/doc/applications/statistics.md" target="_blank">directly in the browser</a>. <br/>
    </p>
</footer>
	</div>

    <script src="https://comfreek.github.io/uniformal.github.io/lib/js/jquery-3.3.1.min.js"></script>
    <script src="https://comfreek.github.io/uniformal.github.io/lib/js/bootstrap.min.js"></script>
		<script src="https://comfreek.github.io/uniformal.github.io/lib/js/doc.js"></script>
		<script src="https://comfreek.github.io/uniformal.github.io/lib/js/api.js"></script>
	
  </body>
</html>
