<!doctype html>
<html lang="en">
	<!-- This is the layout used for all pages in the wiki-style documentation.
        The wiki files must have "layout: doc" in their front matter.
        This file can use page.NAME to refer to variables declared in the front matter
        and content to refer to the body of the md file.
   -->

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">
    <!--
      Do not use base tag: <base href="/uniformal.github.io/" />
      Since otherwise we could not keep links in the documentation relative anymore - without a hassle at least.
      We would always have to prepend doc/ or something.

      Hence, use e.g. `/uniformal.github.io/lib/css/bootstrap.min.css` to refer to assets in this file only.
    -->
    <link rel="icon" href="https://comfreek.github.io/uniformal.github.io/favicon.ico">

    <title>MMT - Integration with sTeX</title>

    <link href="https://comfreek.github.io/uniformal.github.io/lib/css/bootstrap.min.css" rel="stylesheet" />
	  <link href="https://comfreek.github.io/uniformal.github.io/lib/css/doc.css" rel="stylesheet" />
		<link href="https://comfreek.github.io/uniformal.github.io/lib/css/pygments-default.css" rel="stylesheet" />
	
  </head>
  <body>
	
<nav class="navbar navbar-expand navbar-dark site-header" site-header >
    <div class="container">
        <a class="navbar-brand" href="/">
            <img src="https://comfreek.github.io/uniformal.github.io/lib/css/img/logo_dark.svg" width="30" height="30" class="d-inline-block align-top" alt="">
            The MMT Language and System
        </a>
    </div>
</nav>

	
		<div class="container-fluid main">
			<div class="row">
				<div class="col-12 col-md-3 col-xl-2">
					<ul class="nav flex-column">
						


<div class="list-group">
  
    


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/"
    
>
    Overview
</a>

  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/setup/">
    Setting up MMT
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/tutorials/">
    Tutorials
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/philosophy/">
    The Philosophy behind MMT
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/language/">
    The MMT Language
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/archives/">
    MMT-Archives
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/api/">
    The MMT API
</a>





  
    


    








<a class="list-group-item list-group-item-action expandable active" href="https://comfreek.github.io/uniformal.github.io/doc/applications/">
    Applications and Projects based on MMT
</a>




    <div class="list-group">
        
            


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/applications/ides.html">
    IDEs
</a>





        
            


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/applications/shell.html"
    
>
    The MMT Shell
</a>

        
            


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/applications/server.html"
    
>
    The MMT Server
</a>

        
            


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/applications/tgview.html"
    
>
    TGView
</a>

        
            


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/applications/latex.html"
    
>
    LaTeX Processing
</a>

        
    </div>


  
    


    








<a class="list-group-item list-group-item-action expandable " href="https://comfreek.github.io/uniformal.github.io/doc/development/">
    Development
</a>





  
    


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/community/"
    
>
    Community & Communication
</a>

  
    


    



<a class="list-group-item list-group-item-action "
    
        href="https://comfreek.github.io/uniformal.github.io/doc/contribs"
    
>
    Contributed Articles
</a>

  
</div>
					</ul>
				</div>
				<div class="col-12 col-md-9 col-xl-8 content">
					<h2>Integration with sTeX</h2>
					<hr />
	
					<p>MMT can process .tex file using https://github.com/KWARC/LaTeXML or pdflatex. (So MMT will replace or will be used within https://github.com/KWARC/localmh)</p>

<p><code class="highlighter-rouge">.tex</code> input file are expected to be below a <code class="highlighter-rouge">source</code> folder that is underneath a repository folder (i.e. <code class="highlighter-rouge">sets</code>) that is underneath a group folder (i.e. <code class="highlighter-rouge">smglom</code>). Letâ€™s assume that the directory containing group folders is called <code class="highlighter-rouge">MathHub</code> and its parent folder <code class="highlighter-rouge">localmh</code> (as it was the case for <code class="highlighter-rouge">lmh</code> from <a href="https://github.com/KWARC/localmh">https://github.com/KWARC/localmh</a>)</p>

<p>An executable for MMT may be obtained by downloading https://github.com/KWARC/MMT/raw/gh-pages/deploy/mmt.jar</p>

<p>The LaTeXML software needed by MMT is expected to be in the folder <code class="highlighter-rouge">localmh/ext</code> (as for <code class="highlighter-rouge">lmh</code>).</p>

<p>The most convenient way to call MMT is using <code class="highlighter-rouge">rbuild</code> followed by a build target (like <code class="highlighter-rouge">latexml</code>) and a list of files or folders (relativ to your current directory).</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mmt.jar rbuild latexml --force MathHub/smglom/mv/source/a*.tex
</code></pre></div></div>

<p>This automatically loads the necessary extensions and archives and also switches on some logging. Furthermore, <code class="highlighter-rouge">rbuild</code> supports compound (or meta) targets, namely plain targets separated by underscores that will be executed in succession. Running <code class="highlighter-rouge">latexml</code> followed by <code class="highlighter-rouge">stex-omdoc</code> will be done by <code class="highlighter-rouge">latexml_stex-omdoc</code>. (Any combination is possible.)</p>

<p>Any target may be followed by a modifier. Apart from <code class="highlighter-rouge">--force</code> also <code class="highlighter-rouge">--onChange</code>, <code class="highlighter-rouge">--onError</code> and <code class="highlighter-rouge">--clean</code> are supported. Omitting the modifier defaults to <code class="highlighter-rouge">--onChange</code>, i.e. files are only rebuild if they have changed on disk after an earlier build. (<code class="highlighter-rouge">--onError</code> rebuilds if the previous build failed with an error.)</p>

<p>Further options (starting with <code class="highlighter-rouge">--</code>) are passed (unchecked) to the corresponding target implementation. An option for <code class="highlighter-rouge">latexml</code> and <code class="highlighter-rouge">pdflatex</code> is i.e. <code class="highlighter-rouge">--piper-worker-output</code>.</p>

<p>The following text only describes the more complicated way to call MMT (without compound targets) and can be skipped on first reading.</p>

<p>Within a repository folder (like <code class="highlighter-rouge">smglom/sets</code> from https://gl.mathhub.info/smglom/sets) <code class="highlighter-rouge">mmt.jar</code> can be called with the two arguments <code class="highlighter-rouge">file</code> and <code class="highlighter-rouge">build.msl</code>, where build.msl is a file containing something like:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>log console
log+ latexml
extension info.kwarc.mmt.stex.LaTeXML
archive add .
build smglom/sets latexml union.de.tex
</code></pre></div></div>

<p>If the relative file name <code class="highlighter-rouge">union.de.tex</code> (below <code class="highlighter-rouge">source</code>) is omitted (or <code class="highlighter-rouge">.</code> is given) then (currently) all files below <code class="highlighter-rouge">source</code> will be processed.</p>

<p>Note that the identifier <code class="highlighter-rouge">smglom/sets</code> following the keyword <code class="highlighter-rouge">build</code> must correspond to the <code class="highlighter-rouge">id</code> entry of the file <code class="highlighter-rouge">META-INF/MANIFEST.MF</code>.</p>

<p>To only see minimal output you may use the following log lines:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>log- user
log- error
log console
log+ latexml-result 
...
</code></pre></div></div>

<p>A current alternative way to call MMT without <code class="highlighter-rouge">build.msl</code> file is to pass the lines separated by ` ; ` as a single command line argument in double quotes, i.e. without output:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>mmt.jar "extension info.kwarc.mmt.stex.LaTeXML ; archive add . ; build smglom/sets latexml union.de.tex"
</code></pre></div></div>

<p>Note the spaces around ` ; `!</p>

<p>Further extensions are <code class="highlighter-rouge">info.kwarc.mmt.stex.PdfLatex</code> and <code class="highlighter-rouge">info.kwarc.mmt.stex.SmsGenerator</code> with corresponding build targets <code class="highlighter-rouge">pdflatex</code> and <code class="highlighter-rouge">sms</code> (instead of the above <code class="highlighter-rouge">latexml</code>).</p>

<p>The <code class="highlighter-rouge">extension info.kwarc.mmt.stex.STeXImporter</code> with target <code class="highlighter-rouge">stex-omdoc</code> further processes the <code class="highlighter-rouge">.omdoc</code> files created by LaTeXML for MMT.</p>

<p>Setting logging, extensions or environment variables can be done in a <code class="highlighter-rouge">startup.msl</code> file that needs to be in the same folder where your mmt.jar is (actually) located (not where a link to mmt.jar is given).</p>

<p>MMT places the output files for <code class="highlighter-rouge">latexml</code> in a separate folder called <code class="highlighter-rouge">latexml</code>. <code class="highlighter-rouge">.sms</code> files remain in <code class="highlighter-rouge">source</code> whereas <code class="highlighter-rouge">.pdf</code> files will be placed in folder <code class="highlighter-rouge">export/pdflatex</code> (without any auxiliary files).</p>

				</div>
			</div>
		</div>
	


	<div class="container">
		<footer class="container">

    <hr />
    <p>
        MMT is developed and maintained mostly by <a href="http://kwarc.info/frabe/" target="_blank">Florian Rabe</a>. <br />
        
        This page is hosted via github pages and can be edited <a href="https://github.com/UniFormal/uniformal.github.io/edit/master/doc/applications/stex.md" target="_blank">directly in the browser</a>. <br/>
    </p>
</footer>
	</div>

    <script src="https://comfreek.github.io/uniformal.github.io/lib/js/jquery-3.3.1.min.js"></script>
    <script src="https://comfreek.github.io/uniformal.github.io/lib/js/bootstrap.min.js"></script>
		<script src="https://comfreek.github.io/uniformal.github.io/lib/js/doc.js"></script>
		<script src="https://comfreek.github.io/uniformal.github.io/lib/js/api.js"></script>
	
  </body>
</html>
